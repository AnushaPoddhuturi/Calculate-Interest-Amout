<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
<title>Web Page Design</title>

<style type="text/css">

.footer {
   position: fixed;
   left: 0;
   bottom: 0;
   width: 100%;
   text-align: right;
}

.table-row-radio-button {
        text-align: center;
    }

.heading{
    color: green;
    font-size: 20px;
}

#submit{
    background: deepskyblue
}

body {
    
    background: lightblue;

    position: fixed;
    top: 50%;
    left: 50%;
    margin-top: -100px;
    margin-left: -200px;
}
</style>

<body >


<table>
    <thead>
        <tr class="heading">
            <td></td>
          <td>
                <label>Interest Calculator</label>
            </td>
        </tr>
    </thead>
    <tbody>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
    <tr>
        <td><label for="principleAmount" >Principle </label></td>
        <td><input type="text" id="Principle" 
            onkeyup="onPrincipleout()" required /></td>
    </tr>
    <tr>
        <td><label for="fromDate">From Date </label></td>
        <td><input type="date" id="from" required /></td>
    </tr>
    <tr>
        <td><label for="toDate">To Date </label></td>
        <td><input type="date" id="to" required/></td>
    </tr>
    <tr>
        <td><label for="aDays">Adjust Days </label></td>
        <td><input type="text" id="adjustDays" value="0" /></td>
    </tr>
    <tr>
        <td><label for="roilable">ROI </label></td>
        <td><input type="text" id="roi" required/></td>
    </tr>
    <tr>
        <td colspan="2" class="table-row-radio-button" >
            <input type="submit" id = "submit" class="btn btn-primary" value ="Calculate"
            onclick="onSubmit()"></td>
    </tr>
    <tr>
        <td>
            <input type="hidden" id= "NoOfmonths" />
            <input type="hidden" id= "NoOfdays" />
        </td>
    </tr>    
    </tbody>
    
</table>

<div  id="result" style="display: none;" >
<table>
    <tbody>
        <tr>
            <td>
                <label id="months1">Months and Days </label>
            </td>
            <td>
                <label id="monthsanddays"></label>
            </td>
        </tr>
        <tr>
                <td>
                        <label>Monthly Interest </label>
                    </td>
                <td>
                    <label id="MonthlyInterest"></label>
                </td>
            </tr>
            <tr>
                    <td>
                        <label >Principle Amount </label>
                    </td>
                    <td>
                        <label id="principleAmountLabel"></label>
                    </td>
                </tr>
         <tr>
            <td>
                <label >Total Intrest </label>
            </td>
            <td>
                <label id="TotalIntrest"></label>
            </td>
        </tr>
        <tr>
            <td>
                <label>Total </label>
            </td>
            <td>
                <label id="Total"></label>
            </td>
        </tr>
        <tr></tr>
        <tr></tr>
        <tr></tr>
        
    </tbody>
    
</table>

</div>


<script type="text/javascript">

    function onSubmit()
    {
        var Principle = document.getElementById('Principle').value;
        Principle = Principle.replaceAll(',','');
        var from = document.getElementById('from').value;
        var to = document.getElementById('to').value;
        var roi = document.getElementById('roi').value;

        var date1 = new Date(from);
        var date2 = new Date(to);
        
        date2 = addDays(date2,document.getElementById('adjustDays').value);
        monthDiff(date1,date2);
        
        
        var intrestperMonth = 0;
        var intrest = 0;
        intrestperMonth = (Principle/100)*roi;
        intrestperMonth = Math.round(intrestperMonth);
        var months = document.getElementById('NoOfmonths').value;
        if(months > 0)
        {
            intrest = intrestperMonth * months;
        }
        var days = document.getElementById('NoOfdays').value;

        //days = days * 1 + document.getElementById('adjustDays').value * 1;

        if(days > 0)
        {
            intrest += (intrestperMonth/30) * days;
        }
        intrest = Math.round(intrest);        
        document.getElementById('monthsanddays').innerHTML  = 
                 months + ' months ' + days + ' days';
        var totalIP = 0;
        totalIP = parseFloat(Principle) + parseFloat(intrest);
        document.getElementById('Total').innerHTML  =  totalIP;
        document.getElementById('MonthlyInterest').innerHTML  = intrestperMonth;
        document.getElementById('TotalIntrest').innerHTML  = intrest;
        document.getElementById('principleAmountLabel').innerHTML  = Principle;

        var x = document.getElementById("result"); 
        x.style.display = "block";

        document.getElementById('Total').innerHTML =
         (rupeeIndian.format(document.getElementById('Total').innerHTML)).replace('₹','₹ '); 
        document.getElementById('TotalIntrest').innerHTML =
         (rupeeIndian.format(document.getElementById('TotalIntrest').innerHTML)).replace('₹','₹ ');                 
         document.getElementById('MonthlyInterest').innerHTML =
         (rupeeIndian.format(document.getElementById('MonthlyInterest').innerHTML)).replace('₹','₹ '); 
         document.getElementById('principleAmountLabel').innerHTML =
         (rupeeIndian.format(document.getElementById('principleAmountLabel').innerHTML)).replace('₹','₹ ');     
    }
    function monthDiff(d1, d2) {
        var months = 0;
        var days = 0;
        d1 = new Date(d1.setMonth(d1.getMonth()+1));
        while(d2 >= d1)
        {
            months += 1;
            d1 = new Date(d1.setMonth(d1.getMonth()+1));
        }
        //alert(months);
        d1 = new Date(d1.setMonth(d1.getMonth() - 1));

        while(d2 > d1)
        {
            days += 1;
            d1 = new Date(d1.setDate(d1.getDate()+1));            
        }
        //alert(days);
        document.getElementById('NoOfmonths').value = months;
        document.getElementById('NoOfdays').value = days;      

        
          

    }

    let rupeeIndian = Intl.NumberFormat("en-IN", {
        style: "currency",
        currency: "INR",
        minimumFractionDigits: 0
    });

    function onPrincipleout()
    {
        var principleWithoutcomma = document.getElementById('Principle').value
        .replaceAll(',','').replaceAll('₹','');
        //alert(principleWithoutcomma);
        var amount =  rupeeIndian.format(principleWithoutcomma).replace('₹','');
        if(!Number.isInteger(parseInt(amount.substring(0,1))))
        {
            amount = amount.substring(1,100);
        }
        //alert(amount);
        document.getElementById('Principle').value = amount;
           
    }

    function getDate() {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; //January is 0!
        var yyyy = today.getFullYear();

        if(dd<10) {
            dd = '0'+dd
        } 

        if(mm<10) {
            mm = '0'+mm
        } 

        today = yyyy + '-' + mm + '-' + dd;
        console.log(today);
        document.getElementById("to").value = today;
    }

    window.onload = function() {
        getDate();
    };

    function addDays(date, days) {
        var result = new Date(date);
        result.setDate(result.getDate() + days *1);
        return result;
    }

</script>

</body>

</html>